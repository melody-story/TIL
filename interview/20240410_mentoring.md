## 멘토링 피드백

[프로젝트]

## 공부할내용

## 프로젝트 리뷰
- 도커 사용이유 장단점 나만의 답변 찾아보기
- 단골질문) 스프링과 스프링 부트의 차이점
  - auto configured 란? 원리?
    - application.yml의 설정을 빈으로 자동 등록해줌
  - embedded tomcat
  - auto connected 란?
- 자바의 예외가 http 응답코드와 결합되어있는 것은 좋은 코드가 아님. 
  - 1:1매핑 되는 것의 장단점
  - 자바에서의 예외가 http와 결합되는 것은 강결합이다.
  - response entity와 exception에서 응답코드를 관리하게 된다.
  - 프로그램의 복잡도가 올라감. 일관성이 있는 것이 중요
- 로그인을 생성된 세션 아이디를 DB에 저장하는 이유는?
  - 세션이란 무엇인가? 왜필요할까?
    - 1. 세션은 사용자가 웹 사이트에 로그인한 후 그 상태를 유지하기 위해 사용됨.
    - 2. 사용자가 로그인하면 웹 서버는 사용자의 세션을 생성하고 고유한 세션 식별자를 할당합니다. 이 세션 식별자는 사용자의 브라우저에 쿠키로 저장되며, 이후 사용자가 페이지를 요청할 때마다 이 세션 식별자를 함께 보냅니다. 이를 통해 서버는 해당 세션에 대한 정보를 유지하고, 사용자가 로그인 상태를 유지하는 동안 해당 정보를 사용할 수 있습니다. 
    - 3. 세션은 보안을 강화하고 사용자 경험을 개선하는 데 중요한 역할을 합니다. 사용자가 로그인한 후에만 특정 페이지나 기능에 액세스할 수 있도록 하거나, 장바구니와 같은 기능을 구현할 때도 세션을 사용할 수 있습니다.
  - 세션 불일치 현상을 해소하기 위해
    - 서버가 1대일때는 문제가 없으나 서버가 여러대일 경우 서버 불일치 현상으로 로그인이 되지 않을 수 있음.
  - 세션 불일치 현상을 해결하기 위한 방법
    - 1. 공유된 세션 스토리지: 모든 서버가 동일한 세션 스토리지를 사용하도록 구성합니다. 이를 통해 사용자가 한 서버에 로그인한 후에도 다른 서버로 요청을 보내더라도 동일한 세션 정보를 유지할 수 있습니다. 이를 위해 주로 분산 캐시나 데이터베이스를 사용합니다.
    - 2. 로드 밸런서 구성: 서버 로드 밸런서를 사용하여 사용자 요청을 여러 서버로 분산하고, 세션 일관성을 유지할 수 있도록 합니다. 로드 밸런서는 사용자가 이전에 접속한 서버로 재접속하도록 보장하여 세션 일관성을 유지합니다.
    - 3. 세션 클러스터링: 서버 간에 세션 정보를 공유하는 클러스터링 기술을 사용합니다. 이를 통해 여러 서버 간에 세션 데이터를 동기화하고 일관성을 유지할 수 있습니다. 주로 Redis나 Memcached와 같은 인메모리 데이터 스토어를 사용하여 구현합니다.
    - 4. 고유 세션 식별자 사용: 세션 ID를 고유하게 식별할 수 있는 방법을 사용하여 서버 간의 세션 일관성을 유지합니다. 이를 통해 모든 서버가 동일한 세션 ID를 인식하고 세션 데이터에 일관된 접근이 가능하게 됩니다.
- Enum과 같이 서버에서 미리 정해놓은 값들이 저장되는 필드는, ...type 또는 status로 명명
- (슬랙 답변) jpa에서 기본생성자가 필요한 이유?
  - 1. ORM 프레임워크 요구 사항: JPA는 객체와 데이터베이스 간의 매핑을 위한 ORM(Object-Relational Mapping) 프레임워크입니다. 이 매핑을 위해서는 엔티티 클래스에 대응하는 데이터베이스 레코드를 생성하고, 이를 조회 및 수정할 수 있어야 합니다. 이를 위해 JPA는 엔티티 클래스의 인스턴스를 생성하고 초기화하는데 기본 생성자를 필요로 합니다. 기본 생성자가 없으면 JPA는 엔티티를 올바르게 생성할 수 없습니다.
  - 2. 프록시 및 리플렉션: JPA는 지연 로딩 및 프록시 객체를 생성하여 성능을 최적화하는데, 이를 위해 엔티티 클래스의 인스턴스를 생성하는 과정에서 리플렉션을 사용합니다. 일부 ORM 프레임워크는 기본 생성자가 없는 클래스를 생성하거나 프록시 객체를 만드는 데 어려움을 겪을 수 있습니다.
- 팩토리 메서드의 장점
- 테스트란 무엇이고 왜 해야하는가?
- 단위테스트와 통합테스트의 차이점
  - 테스트 피라미드 알아보기
- 컨트롤러인데 서비스에 의존하면 통합테스트이나, 완전한 통합 테스트는 아니다.
- checked, unchecked exception

- (코드리뷰반영하기)
  - 예외발생시 응답코드가 controller, exception 코드 두가지 방법으로 처리 되어있음. 일관성있게 한가지 방법으로 통일
  - [x] 어노테이션 주석 멀티 주석으로 수정
  - [x] 컨트롤러 메서드네이밍 의미있게 수정하기
  - [x] 컬럼이 없는 필드는 하이버네이트가 자동으로 매핑을 해주지만 실수가 있을 수 있기때문에 컬럼 어노테이션 적용해주기
  - [x] 테이블 필드명 user_id-> id user 테이블의 pK가 id이므로 혼선을 줄수는 없으나, FK로 사용될 경우는 user_id로 명명하는 것이 좋음.
  - [x] id라는 postfix 는 테이블의 키를 나타내는데 사용된다. 이때문에 session_id 필드는 FK로 오인될 수 있으므로, session_key로 권장
  - [x] 모든 클래스가 생성자가 필요하지 않다. jpa에서는 기본생서자가 필요한 경우가 있다.
  - [x] 커스텀 예외 클래스 `SignUpException`: 미사용 기본생성자생성 어노테이션 제거
  - (슬랙 답변) record를 쓰는 기준 명확히 하기(무엇이고 프로젝트 내에 사용 기준)
  - [ ] 단위테스트와 통합테스트의 차이알고 적용하기
  - [ ] 단순 테스트를 위한 테스트 코드는 제거
  - [ ] 테스트 코드 컨벤션 적용(main 과 동일한 패키지 구조로 적용)
    - 테스트 클래스는 테스트 하려는 클래스 이름뒤 Testx
  - [ ] user 객체 생성방법 변경하기 
    - dto-> entity 변환시 등에는 디자인 패턴중 정적팩토리패턴을 만들어 반영하기 [참고](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1%EC%9E%90-%EB%8C%80%EC%8B%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90)
      - 자바에서는 생성자로 객체를 생성하지 않는 경우가 드물다. 파라미터의 갯수가 늘어나면 순서를 일일이 기억해야 하기 때문. 변화가 적고 실수를 줄일수있다. 네이밍가독성이 좋다. new가 아닌 함수로 생성.
  - (새로운 PR) ExceptionHandler, ControllerAdvice 찾아보기

## 책리뷰
- MVC패턴에서 세가지의 역할이 무엇인지
- 서비스의 역할이 무엇이고 서비스가 dto를 알아야할까?
  - dto를 넘기는게 일반적
- 10장 세션
  - 세션이란 무엇인가? 왜필요할까?
  - 세션 불일치 현상

